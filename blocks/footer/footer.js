import { readBlockConfig, decorateIcons } from "../../scripts/lib-franklin.js"; export default async function decorate(e) { const n = readBlockConfig(e); e.textContent = ""; const t = n.footer || "/footer", c = await fetch(`${t}.plain.html`, window.location.pathname.endsWith("/footer") ? { cache: "reload" } : {}); if (c.ok) { const n = await c.text(), t = document.createElement("div"); t.innerHTML = n; const o = t.querySelector(".footercolumn"), d = document.createElement("div"); d.classList.add("footer-cols"), [...o.children].forEach((e => { const n = document.createElement("div"); n.classList.add("col-" + e.children[0].innerHTML.replace(/\s+/g, "-").toLowerCase(), "col-accordion"); const t = document.createElement("p"); t.setAttribute("id", e.children[0].innerHTML.replace(/\s+/g, "-").toLowerCase()), t.classList.add("col-list-heading"), t.innerHTML = e.children[0].innerHTML, n.appendChild(t); const c = document.createElement("ul"); c.classList.add("col-list-content"); const o = e.children[1].children; for (var r of o) [...r.children].forEach((e => { e.classList.add("accord") })), c.innerHTML = r.innerHTML; n.appendChild(c), d.appendChild(n) })); const r = document.createElement("div"); r.classList.add("col-social");[...t.querySelector(".socialblock").children].forEach((e => { if (0 === e.children[1].children.length) { const n = document.createElement("div"); n.classList.add(e.children[0].innerHTML.replace(/\s+/g, "-").toLowerCase()), n.innerHTML = `<p> ${e.children[1].innerHTML} </p>`, r.appendChild(n) } else { const t = document.createElement("div"); t.classList.add(e.children[0].innerHTML.replace(/\s+/g, "-").toLowerCase()); const c = document.createElement("ul"); c.classList.add("list-content"); const o = e.children[1].children; for (var n of o) { const e = document.createElement("li"); e.innerHTML = n.innerHTML, c.appendChild(e) } t.appendChild(c), r.appendChild(t) } })), d.appendChild(r); const i = t.querySelector(".footnote > div > div"), a = t.querySelector(".footnote > div > div > ul"); i.classList.add("footnote"), a.classList.add("footnote-list"), [...a.children].forEach((e => { const n = document.createElement("p"); n.innerHTML = e.innerHTML, e.innerHTML = "", e.append(n) })), o.innerHTML = "", o.append(d), o.append(i); const l = document.createElement("div"); l.classList.add("footer-content"), l.innerHTML = o.innerHTML; const s = t.querySelector(".footerbar"), p = t.querySelector(".footerbar > div > div > ul"), h = document.createElement("div"); h.classList.add("footer-bar"), [...s.children].forEach((e => { if (0 === e.children[1].children.length) { const n = document.createElement("div"); n.classList.add(e.children[0].innerHTML.replace(/\s+/g, "-").toLowerCase()), n.innerHTML = `<p> ${e.children[1].innerHTML} </p>`, h.appendChild(n) } else { const t = document.createElement("div"); t.classList.add(e.children[0].innerHTML.replace(/\s+/g, "-").toLowerCase()); const c = document.createElement("ul"); c.classList.add("footerbar-list"); const o = p.children; for (var n of o) { const e = document.createElement("li"); e.innerHTML = n.innerHTML, c.appendChild(e) } t.appendChild(c), h.appendChild(t) } })); const L = document.createElement("div"); L.classList.add("footer-content-wrapper"), e.appendChild(L), L.appendChild(l); const m = document.createElement("div"); m.classList.add("footer-bar-wrapper"), e.appendChild(m), m.appendChild(h), decorateIcons(t) } }